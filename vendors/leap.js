!function(t,n,e){function r(e,o){if(!n[e]){if(!t[e]){var a="function"==typeof require&&require;if(!o&&a)return a(e,!0);if(i)return i(e,!0);throw new Error("Cannot find module '"+e+"'")}var s=n[e]={exports:{}};t[e][0].call(s.exports,function(n){var i=t[e][1][n];return r(i||n)},s,s.exports)}return n[e].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o])}({1:[function(t,n,e){var r=t("./protocol").chooseProtocol,i=t("events").EventEmitter,o=t("underscore"),a=n.exports=function(t){this.opts=o.defaults(t||{},{host:"127.0.0.1",enableGestures:!1,tryReconnectOnDisconnect:!0,port:6437,enableHeartbeat:!0,heartbeatInterval:100,requestProtocolVersion:3,connectAttempts:3}),this.resetAttempts(),this.host=t.host,this.port=t.port,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.opts.enableHeartbeat&&this.startHeartbeat()}),this.on("disconnect",function(){this.opts.enableHeartbeat&&this.stopHeartbeat()}),this.heartbeatTimer=null};a.prototype.resetAttempts=function(){this.attempts=this.opts.connectAttempts},a.prototype.getUrl=function(){return"ws://"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},a.prototype.sendHeartbeat=function(){this.protocol&&(this.setHeartbeatState(!0),this.protocol.sendHeartbeat(this))},a.prototype.handleOpen=function(){this.emit("connect")},a.prototype.enableGestures=function(t){this.gesturesEnabled=!!t,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},a.prototype.handleClose=function(){this.disconnect(),this.opts.tryReconnectOnDisconnect?this.startReconnection():this.attempts=0},a.prototype.startReconnection=function(){var t=this;setTimeout(function(){t.connect()},1e3)},a.prototype.disconnect=function(){this.socket&&(this.socket.close(),delete this.socket,delete this.protocol,this.emit("disconnect"))},a.prototype.handleData=function(t){var n,e=JSON.parse(t);void 0===this.protocol?(n=this.protocol=r(e),this.emit("ready")):n=this.protocol(e),this.emit(n.type,n)},a.prototype.connect=function(){if(!this.socket&&(-1===this.attempts||0!=this.attempts--))return this.socket=this.setupSocket(),!0},a.prototype.send=function(t){this.socket.send(t)},a.prototype.stopHeartbeat=function(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),delete this.heartbeatTimer,this.setHeartbeatState(!1))},a.prototype.setHeartbeatState=function(t){this.heartbeatState!==t&&(this.heartbeatState=t,this.emit(this.heartbeatState?"focus":"blur"))},o.extend(a.prototype,i.prototype)},{"./protocol":12,events:17,underscore:20}],2:[function(t,n,e){var r=n.exports=function(t){this.pos=0,this._buf=[],this.size=t};r.prototype.get=function(t){if(void 0==t&&(t=0),!(t>=this.size||t>=this._buf.length))return this._buf[(this.pos-t-1)%this.size]},r.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],3:[function(t,n,e){var r=n.exports=t("./base_connection");r.prototype.setupSocket=function(){var t,n=this;try{t=new WebSocket(this.getUrl())}catch(t){return void console.error(t)}return t.onopen=function(){n.handleOpen()},t.onmessage=function(t){n.handleData(t.data)},t.onclose=function(){n.handleClose()},t},r.prototype.startHeartbeat=function(){if(this.protocol.sendHeartbeat&&!this.heartbeatTimer){var t=this,n=null;n=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0;var e=!0,r=window.addEventListener("focus",function(t){e=!0}),i=window.addEventListener("blur",function(t){e=!1});this.on("disconnect",function(){t.heartbeatTimer&&(clearTimeout(t.heartbeatTimer),delete t.heartbeatTimer),window.removeEventListener(r),window.removeEventListener(i)}),this.heartbeatTimer=setInterval(function(){(void 0===n||!1===document[n])&&e?t.sendHeartbeat():t.setHeartbeatState(!1)},this.opts.heartbeatInterval)}}},{"./base_connection":1}],4:[function(t,n,e){var r=t("__browserify_process"),i=t("./frame"),o=t("./circular_buffer"),a=t("./pipeline"),s=t("events").EventEmitter,u=t("./gesture").gestureListener,c=t("underscore"),l=n.exports=function(n){var e=void 0!==r&&"node"===r.title;n=c.defaults(n||{},{inNode:e}),this.inNode=n.inNode,n=c.defaults(n||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",supressAnimationLoop:!1}),this.supressAnimationLoop=n.supressAnimationLoop,this.frameEventName=n.frameEventName,this.history=new o(200),this.lastFrame=i.Invalid,this.lastValidFrame=i.Invalid,this.lastConnectionFrame=i.Invalid,this.accumulatedGestures=[],void 0===n.connectionType?this.connectionType=t(this.inBrowser()?"./connection":"./node_connection"):this.connectionType=n.connectionType,this.connection=new this.connectionType(n),this.setupConnectionEvents()};l.prototype.gesture=function(t,n){var e=u(this,t);return void 0!==n&&e.stop(n),e},l.prototype.inBrowser=function(){return!this.inNode},l.prototype.useAnimationLoop=function(){return this.inBrowser()&&"undefined"==typeof chrome},l.prototype.connect=function(){var t=this;if(t.connection.resetAttempts(),this.connection.connect()&&this.inBrowser()&&!t.supressAnimationLoop){var n=function(){t.emit("animationFrame",t.lastConnectionFrame),0!==t.connection.attempts&&window.requestAnimFrame(n)};window.requestAnimFrame(n)}},l.prototype.disconnect=function(){this.connection.disconnect()},l.prototype.frame=function(t){return this.history.get(t)||i.Invalid},l.prototype.loop=function(t){switch(t.length){case 1:this.on(this.frameEventName,t);break;case 2:var n=this,e=function(r){t(r,function(){n.lastFrame!=r?e(n.lastFrame):n.once(n.frameEventName,e)})};this.once(this.frameEventName,e)}this.connect()},l.prototype.addStep=function(t){this.pipeline||(this.pipeline=new a(this)),this.pipeline.addStep(t)},l.prototype.processFrame=function(t){t.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)),this.pipeline&&((t=this.pipeline.run(t))||(t=i.Invalid)),this.lastConnectionFrame=t,this.emit("deviceFrame",t)},l.prototype.processFinishedFrame=function(t){if(this.lastFrame=t,t.valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),t.gestures){t.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var n=0;n!=t.gestures.length;n++)this.emit("gesture",t.gestures[n],t)}this.emit("frame",t)},l.prototype.setupConnectionEvents=function(){var t=this;this.connection.on("frame",function(n){t.processFrame(n)}),this.on(this.frameEventName,function(n){t.processFinishedFrame(n)}),this.connection.on("disconnect",function(){t.emit("disconnect")}),this.connection.on("ready",function(){t.emit("ready")}),this.connection.on("connect",function(){t.emit("connect")}),this.connection.on("focus",function(){t.emit("focus")}),this.connection.on("blur",function(){t.emit("blur")}),this.connection.on("protocol",function(n){t.emit("protocol",n)}),this.connection.on("deviceConnect",function(n){t.emit(n.state?"deviceConnected":"deviceDisconnected")})},c.extend(l.prototype,s.prototype)},{"./circular_buffer":2,"./connection":3,"./frame":5,"./gesture":6,"./node_connection":16,"./pipeline":10,__browserify_process:18,events:17,underscore:20}],5:[function(t,n,e){var r=t("./hand"),i=t("./pointable"),o=t("./gesture").createGesture,a=t("gl-matrix"),s=a.mat3,u=a.vec3,c=t("./interaction_box"),l=t("underscore"),f=n.exports=function(t){this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new c(t.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=t.t,this._rotation=l.flatten(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate;for(var n={},e=0,a=t.hands.length;e!=a;e++)(h=new r(t.hands[e])).frame=this,this.hands.push(h),this.handsMap[h.id]=h,n[h.id]=e;for(var s=0,u=t.pointables.length;s!=u;s++){var f=new i(t.pointables[s]);if(f.frame=this,this.pointables.push(f),this.pointablesMap[f.id]=f,(f.tool?this.tools:this.fingers).push(f),void 0!==f.handId&&n.hasOwnProperty(f.handId)){var h=this.hands[n[f.handId]];h.pointables.push(f),(f.tool?h.tools:h.fingers).push(f)}}if(t.gestures)for(var p=0,d=t.gestures.length;p!=d;p++)this.gestures.push(o(t.gestures[p]))};f.prototype.tool=function(t){var n=this.pointable(t);return n.tool?n:i.Invalid},f.prototype.pointable=function(t){return this.pointablesMap[t]||i.Invalid},f.prototype.finger=function(t){var n=this.pointable(t);return n.tool?i.Invalid:n},f.prototype.hand=function(t){return this.handsMap[t]||r.Invalid},f.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;var e=this.rotationMatrix(t),r=.5*(e[0]+e[4]+e[8]-1),i=Math.acos(r);if(i=isNaN(i)?0:i,void 0!==n){var o=this.rotationAxis(t);i*=u.dot(o,u.normalize(u.create(),n))}return i},f.prototype.rotationAxis=function(t){return this.valid&&t.valid?u.normalize(u.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):u.create()},f.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return s.create();var n=s.transpose(s.create(),this._rotation);return s.multiply(s.create(),t._rotation,n)},f.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},f.prototype.translation=function(t){return this.valid&&t.valid?u.subtract(u.create(),this._translation,t._translation):u.create()},f.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(t+=" | Gesture count:("+this.gestures.length+")"),t+=" ]"},f.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var n=0,e=this.hands.length;n!=e;n++)t+="  "+this.hands[n].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var r=0,i=this.pointables.length;r!=i;r++)t+="  "+this.pointables[r].toString()+"<br/>";if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)t+="  "+this.gestures[o].toString()+"<br/>"}return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},f.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return i.Invalid},finger:function(){return i.Invalid},hand:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return u.create()},scaleFactor:function(){return 1},translation:function(){return u.create()}}},{"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"gl-matrix":19,underscore:20}],6:[function(t,n,e){t("gl-matrix").vec3;var r=t("events").EventEmitter,i=t("underscore"),o=(e.createGesture=function(t){var n;switch(t.type){case"circle":n=new a(t);break;case"swipe":n=new s(t);break;case"screenTap":n=new u(t);break;case"keyTap":n=new c(t);break;default:throw"unkown gesture type"}return n.id=t.id,n.handIds=t.handIds,n.pointableIds=t.pointableIds,n.duration=t.duration,n.state=t.state,n.type=t.type,n},e.gestureListener=function(t,n){var e={},r={};t.on("gesture",function(t,a){if(t.type==n){if(("start"==t.state||"stop"==t.state)&&void 0===r[t.id]){var s=new o(t,a);r[t.id]=s,i.each(e,function(t,n){s.on(n,t)})}r[t.id].update(t,a),"stop"==t.state&&delete r[t.id]}});var a={start:function(t){return e.start=t,a},stop:function(t){return e.stop=t,a},complete:function(t){return e.stop=t,a},update:function(t){return e.update=t,a}};return a},e.Gesture=function(t,n){this.gestures=[t],this.frames=[n]});o.prototype.update=function(t,n){this.gestures.push(t),this.frames.push(n),this.emit(t.state,this)},i.extend(o.prototype,r.prototype);var a=function(t){this.center=t.center,this.normal=t.normal,this.progress=t.progress,this.radius=t.radius};a.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var s=function(t){this.startPosition=t.startPosition,this.position=t.position,this.direction=t.direction,this.speed=t.speed};s.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var u=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};u.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var c=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};c.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:17,"gl-matrix":19,underscore:20}],7:[function(t,n,e){var r=t("./pointable"),i=t("gl-matrix"),o=i.mat3,a=i.vec3,s=t("underscore"),u=n.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],this.tools=[],this._translation=t.t,this._rotation=s.flatten(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition};u.prototype.finger=function(t){var n=this.frame.finger(t);return n&&n.handId==this.id?n:r.Invalid},u.prototype.rotationAngle=function(t,n){if(!this.valid||!t.valid)return 0;if(!t.hand(this.id).valid)return 0;var e=this.rotationMatrix(t),r=.5*(e[0]+e[4]+e[8]-1),i=Math.acos(r);if(i=isNaN(i)?0:i,void 0!==n){var o=this.rotationAxis(t);i*=a.dot(o,a.normalize(a.create(),n))}return i},u.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return a.create();var n=t.hand(this.id);return n.valid?a.normalize(a.create(),[this._rotation[7]-n._rotation[5],this._rotation[2]-n._rotation[6],this._rotation[3]-n._rotation[1]]):a.create()},u.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return o.create();var n=t.hand(this.id);if(!n.valid)return o.create();var e=o.transpose(o.create(),this._rotation);return o.multiply(o.create(),n._rotation,e)},u.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var n=t.hand(this.id);return n.valid?Math.exp(this._scaleFactor-n._scaleFactor):1},u.prototype.translation=function(t){if(!this.valid||!t.valid)return a.create();var n=t.hand(this.id);return n.valid?[this._translation[0]-n._translation[0],this._translation[1]-n._translation[1],this._translation[2]-n._translation[2]]:a.create()},u.prototype.toString=function(){return"Hand [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},u.Invalid={valid:!1,fingers:[],tools:[],pointables:[],pointable:function(){return r.Invalid},finger:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return o.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{"./pointable":11,"gl-matrix":19,underscore:20}],8:[function(t,n,e){n.exports={Controller:t("./controller"),Frame:t("./frame"),Gesture:t("./gesture"),Hand:t("./hand"),Pointable:t("./pointable"),InteractionBox:t("./interaction_box"),Connection:t("./connection"),CircularBuffer:t("./circular_buffer"),UI:t("./ui"),glMatrix:t("gl-matrix"),mat3:t("gl-matrix").mat3,vec3:t("gl-matrix").vec3,loopController:void 0,loop:function(t,n){void 0===n&&(n=t,t={}),this.loopController||(this.loopController=new this.Controller(t)),this.loopController.loop(n)}}},{"./circular_buffer":2,"./connection":3,"./controller":4,"./frame":5,"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"./ui":13,"gl-matrix":19}],9:[function(t,n,e){var r=t("gl-matrix").vec3,i=n.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};i.prototype.denormalizePoint=function(t){return r.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},i.prototype.normalizePoint=function(t,n){var e=r.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return n&&(e[0]=Math.min(Math.max(e[0],0),1),e[1]=Math.min(Math.max(e[1],0),1),e[2]=Math.min(Math.max(e[2],0),1)),e},i.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},i.Invalid={valid:!1}},{"gl-matrix":19}],10:[function(t,n,e){var r=n.exports=function(){this.steps=[]};r.prototype.addStep=function(t){this.steps.push(t)},r.prototype.run=function(t){for(var n=this.steps.length,e=0;e!=n&&t;e++)t=this.steps[e](t);return t}},{}],11:[function(t,n,e){t("gl-matrix").vec3;var r=n.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible};r.prototype.toString=function(){return 1==this.tool?"Pointable [ id:"+this.id+" "+this.length+"mmx | with:"+this.width+"mm | direction:"+this.direction+" ]":"Pointable [ id:"+this.id+" "+this.length+"mmx | direction: "+this.direction+" ]"},r.Invalid={valid:!1}},{"gl-matrix":19}],12:[function(t,n,e){var r=t("./frame"),i=function(t){this.type=t.type,this.state=t.state},o=(e.chooseProtocol=function(t){var n;switch(t.version){case 1:n=o(1,function(t){return new r(t)});break;case 2:(n=o(2,function(t){return new r(t)})).sendHeartbeat=function(t){t.send(n.encode({heartbeat:!0}))};break;case 3:(n=o(3,function(t){return t.event?new i(t.event):new r(t)})).sendHeartbeat=function(t){t.send(n.encode({heartbeat:!0}))};break;default:throw"unrecognized version"}return n},function(t,n){var e=n;return e.encode=function(t){return JSON.stringify(t)},e.version=t,e.versionLong="Version "+t,e.type="protocol",e})},{"./frame":5}],13:[function(t,n,e){e.UI={Region:t("./ui/region"),Cursor:t("./ui/cursor")}},{"./ui/cursor":14,"./ui/region":15}],14:[function(t,n,e){n.exports=function(){return function(t){var n=t.pointables.sort(function(t,n){return t.z-n.z})[0];return n&&n.valid&&(t.cursorPosition=n.tipPosition),t}}},{}],15:[function(t,n,e){var r=t("events").EventEmitter,i=t("underscore"),o=n.exports=function(t,n){this.start=new Vector(t),this.end=new Vector(n),this.enteredFrame=null};o.prototype.hasPointables=function(t){for(var n=0;n!=t.pointables.length;n++){var e=t.pointables[n].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1},o.prototype.listener=function(t){var n=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return n.updatePosition(t)}},o.prototype.clipper=function(){var t=this;return function(n){return t.updatePosition(n),t.enteredFrame?n:null}},o.prototype.setupNearRegion=function(t){var n=this.nearRegion=new o([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),e=this;n.on("enter",function(t){e.emit("near",t)}),n.on("exit",function(t){e.emit("far",t)}),e.on("exit",function(t){e.emit("near",t)})},o.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},o.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},o.prototype.mapToXY=function(t,n,e){var r=this.normalize(t),i=r.x,o=r.y;return i>1?i=1:i<-1&&(i=-1),o>1?o=1:o<-1&&(o=-1),[(i+1)/2*n,(1-o)/2*e,r.z]},i.extend(o.prototype,r.prototype)},{events:17,underscore:20}],16:[function(t,n,e){},{}],17:[function(t,n,e){function r(t,n){if(t.indexOf)return t.indexOf(n);for(var e=0;e<t.length;e++)if(n===t[e])return e;return-1}var i=t("__browserify_process");i.EventEmitter||(i.EventEmitter=function(){});var o=e.EventEmitter=i.EventEmitter,a="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};o.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},o.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var n=this._events[t];if(!n)return!1;if("function"==typeof n){switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:e=Array.prototype.slice.call(arguments,1);n.apply(this,e)}return!0}if(a(n)){for(var e=Array.prototype.slice.call(arguments,1),r=n.slice(),i=0,o=r.length;i<o;i++)r[i].apply(this,e);return!0}return!1},o.prototype.addListener=function(t,n){if("function"!=typeof n)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,n),this._events[t])if(a(this._events[t])){if(!this._events[t].warned){var e;(e=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&e>0&&this._events[t].length>e&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(n)}else this._events[t]=[this._events[t],n];else this._events[t]=n;return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(t,n){var e=this;return e.on(t,function r(){e.removeListener(t,r),n.apply(this,arguments)}),this},o.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var e=this._events[t];if(a(e)){var i=r(e,n);if(i<0)return this;e.splice(i,1),0==e.length&&delete this._events[t]}else this._events[t]===n&&delete this._events[t];return this},o.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},o.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},o.listenerCount=function(t,n){return t._events&&t._events[n]?"function"==typeof t._events[n]?1:t._events[n].length:0}},{__browserify_process:18}],18:[function(t,n,e){var r=n.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var e=[];return window.addEventListener("message",function(t){var n=t.source;n!==window&&null!==n||"process-tick"!==t.data||(t.stopPropagation(),e.length>0&&e.shift()())},!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],19:[function(t,n,e){!function(){"use strict";var t={};void 0===e?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.exports={},define(function(){return t.exports})):t.exports=window:t.exports=e,function(t){var n={};if(!h)h=1e-6;n.create=function(){return new Float32Array(2)},n.clone=function(t){var n=new Float32Array(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){var e=new Float32Array(2);return e[0]=t,e[1]=n,e},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,e){return t[0]=n,t[1]=e,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},n.sub=n.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t},n.mul=n.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t},n.div=n.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},n.dist=n.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)},n.sqrDist=n.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r},n.len=n.length=function(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)},n.sqrLen=n.squaredLength=function(t){var n=t[0],e=t[1];return n*n+e*e},n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.normalize=function(t,n){var e=n[0],r=n[1],i=e*e+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,n,e,r){var i=n[0],o=n[1];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t},n.transformMat2=function(t,n,e){var r=n[0],i=n[1];return t[0]=r*e[0]+i*e[1],t[1]=r*e[2]+i*e[3],t},n.forEach=function(){var t=new Float32Array(2);return function(n,e,r,i,o,a){var s,u;for(e||(e=2),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;s<u;s+=e)t[0]=n[s],t[1]=n[s+1],o(t,t,a),n[s]=t[0],n[s+1]=t[1];return n}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},void 0!==t&&(t.vec2=n);var e={};if(!h)h=1e-6;e.create=function(){return new Float32Array(3)},e.clone=function(t){var n=new Float32Array(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},e.fromValues=function(t,n,e){var r=new Float32Array(3);return r[0]=t,r[1]=n,r[2]=e,r},e.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},e.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},e.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},e.sub=e.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t},e.mul=e.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t},e.div=e.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t},e.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},e.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},e.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},e.dist=e.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(e*e+r*r+i*i)},e.sqrDist=e.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return e*e+r*r+i*i},e.len=e.length=function(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)},e.sqrLen=e.squaredLength=function(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r},e.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},e.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=e*e+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t},e.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},e.cross=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},e.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t},e.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12],t[1]=e[1]*r+e[5]*i+e[9]*o+e[13],t[2]=e[2]*r+e[6]*i+e[10]*o+e[14],t},e.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},e.forEach=function(){var t=new Float32Array(3);return function(n,e,r,i,o,a){var s,u;for(e||(e=3),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;s<u;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2];return n}}(),e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},void 0!==t&&(t.vec3=e);var r={};if(!h)h=1e-6;r.create=function(){return new Float32Array(4)},r.clone=function(t){var n=new Float32Array(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},r.fromValues=function(t,n,e,r){var i=new Float32Array(4);return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},r.set=function(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t},r.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},r.sub=r.subtract=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t},r.mul=r.multiply=function(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t},r.div=r.divide=function(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t},r.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},r.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},r.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},r.dist=r.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+i*i+o*o)},r.sqrDist=r.squaredDistance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+i*i+o*o},r.len=r.length=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.sqrt(n*n+e*e+r*r+i*i)},r.sqrLen=r.squaredLength=function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return n*n+e*e+r*r+i*i},r.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},r.normalize=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a),t},r.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},r.lerp=function(t,n,e,r){var i=n[0],o=n[1],a=n[2],s=n[3];return t[0]=i+r*(e[0]-i),t[1]=o+r*(e[1]-o),t[2]=a+r*(e[2]-a),t[3]=s+r*(e[3]-s),t},r.transformMat4=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*o+e[12]*a,t[1]=e[1]*r+e[5]*i+e[9]*o+e[13]*a,t[2]=e[2]*r+e[6]*i+e[10]*o+e[14]*a,t[3]=e[3]*r+e[7]*i+e[11]*o+e[15]*a,t},r.transformQuat=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=e[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},r.forEach=function(){var t=new Float32Array(4);return function(n,e,r,i,o,a){var s,u;for(e||(e=4),r||(r=0),u=i?Math.min(i*e+r,n.length):n.length,s=r;s<u;s+=e)t[0]=n[s],t[1]=n[s+1],t[2]=n[s+2],t[3]=n[s+3],o(t,t,a),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2],n[s+3]=t[3];return n}}(),r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},void 0!==t&&(t.vec4=r);var i={},o=new Float32Array([1,0,0,1]);if(!h)h=1e-6;i.create=function(){return new Float32Array(o)},i.clone=function(t){var n=new Float32Array(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},i.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},i.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=e*a,t):null},i.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},i.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},i.mul=i.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=r*s+i*c,t[1]=r*u+i*l,t[2]=o*s+a*c,t[3]=o*u+a*l,t},i.rotate=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+i*s,t[1]=r*-s+i*u,t[2]=o*u+a*s,t[3]=o*-s+a*u,t},i.scale=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1];return t[0]=r*s,t[1]=i*u,t[2]=o*s,t[3]=a*u,t},i.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},void 0!==t&&(t.mat2=i);var a={},s=new Float32Array([1,0,0,0,1,0,0,0,1]);if(!h)h=1e-6;a.create=function(){return new Float32Array(s)},a.clone=function(t){var n=new Float32Array(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},a.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},a.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=l*a-s*c,h=-l*o+s*u,p=c*o-a*u,d=e*f+r*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(l*e-i*u)*d,t[5]=(-s*e+i*o)*d,t[6]=p*d,t[7]=(-c*e+r*u)*d,t[8]=(a*e-r*o)*d,t):null},a.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=e*l-i*u,t[5]=i*o-e*s,t[6]=o*c-a*u,t[7]=r*u-e*c,t[8]=e*a-r*o,t},a.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return n*(c*o-a*u)+e*(-c*i+a*s)+r*(u*i-o*s)},a.mul=a.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=e[0],p=e[1],d=e[2],v=e[3],m=e[4],y=e[5],g=e[6],b=e[7],w=e[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*s+d*l,t[2]=h*o+p*u+d*f,t[3]=v*r+m*a+y*c,t[4]=v*i+m*s+y*l,t[5]=v*o+m*u+y*f,t[6]=g*r+b*a+w*c,t[7]=g*i+b*s+w*l,t[8]=g*o+b*u+w*f,t},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},void 0!==t&&(t.mat3=a);var u={},c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(!h)h=1e-6;u.create=function(){return new Float32Array(c)},u.clone=function(t){var n=new Float32Array(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},u.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},u.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],i=n[3],o=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},u.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15],g=e*s-r*a,b=e*u-i*a,w=e*c-o*a,_=r*u-i*s,x=r*c-o*s,M=i*c-o*u,F=l*v-f*d,A=l*m-h*d,E=l*y-p*d,q=f*m-h*v,z=f*y-p*v,I=h*y-p*m,S=g*I-b*z+w*q+_*E-x*A+M*F;return S?(S=1/S,t[0]=(s*I-u*z+c*q)*S,t[1]=(i*z-r*I-o*q)*S,t[2]=(v*M-m*x+y*_)*S,t[3]=(h*x-f*M-p*_)*S,t[4]=(u*E-a*I-c*A)*S,t[5]=(e*I-i*E+o*A)*S,t[6]=(m*w-d*M-y*b)*S,t[7]=(l*M-h*w+p*b)*S,t[8]=(a*z-s*E+c*F)*S,t[9]=(r*E-e*z-o*F)*S,t[10]=(d*x-v*w+y*g)*S,t[11]=(f*w-l*x-p*g)*S,t[12]=(s*A-a*q-u*F)*S,t[13]=(e*q-r*A+i*F)*S,t[14]=(v*b-d*_-m*g)*S,t[15]=(l*_-f*b+h*g)*S,t):null},u.adjoint=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],f=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],y=n[15];return t[0]=s*(h*y-p*m)-f*(u*y-c*m)+v*(u*p-c*h),t[1]=-(r*(h*y-p*m)-f*(i*y-o*m)+v*(i*p-o*h)),t[2]=r*(u*y-c*m)-s*(i*y-o*m)+v*(i*c-o*u),t[3]=-(r*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*y-p*m)-l*(u*y-c*m)+d*(u*p-c*h)),t[5]=e*(h*y-p*m)-l*(i*y-o*m)+d*(i*p-o*h),t[6]=-(e*(u*y-c*m)-a*(i*y-o*m)+d*(i*c-o*u)),t[7]=e*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*y-p*v)-l*(s*y-c*v)+d*(s*p-c*f),t[9]=-(e*(f*y-p*v)-l*(r*y-o*v)+d*(r*p-o*f)),t[10]=e*(s*y-c*v)-a*(r*y-o*v)+d*(r*c-o*s),t[11]=-(e*(s*p-c*f)-a*(r*p-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*m-h*v)-l*(s*m-u*v)+d*(s*h-u*f)),t[13]=e*(f*m-h*v)-l*(r*m-i*v)+d*(r*h-i*f),t[14]=-(e*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),t[15]=e*(s*h-u*f)-a*(r*h-i*f)+l*(r*u-i*s),t},u.determinant=function(t){var n=t[0],e=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],m=t[15];return(n*a-e*o)*(f*m-h*v)-(n*s-r*o)*(l*m-h*d)+(n*u-i*o)*(l*v-f*d)+(e*s-r*a)*(c*m-h*p)-(e*u-i*a)*(c*v-f*p)+(r*u-i*s)*(c*d-l*p)},u.mul=u.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],v=n[12],m=n[13],y=n[14],g=n[15],b=e[0],w=e[1],_=e[2],x=e[3];return t[0]=b*r+w*s+_*f+x*v,t[1]=b*i+w*u+_*h+x*m,t[2]=b*o+w*c+_*p+x*y,t[3]=b*a+w*l+_*d+x*g,b=e[4],w=e[5],_=e[6],x=e[7],t[4]=b*r+w*s+_*f+x*v,t[5]=b*i+w*u+_*h+x*m,t[6]=b*o+w*c+_*p+x*y,t[7]=b*a+w*l+_*d+x*g,b=e[8],w=e[9],_=e[10],x=e[11],t[8]=b*r+w*s+_*f+x*v,t[9]=b*i+w*u+_*h+x*m,t[10]=b*o+w*c+_*p+x*y,t[11]=b*a+w*l+_*d+x*g,b=e[12],w=e[13],_=e[14],x=e[15],t[12]=b*r+w*s+_*f+x*v,t[13]=b*i+w*u+_*h+x*m,t[14]=b*o+w*c+_*p+x*y,t[15]=b*a+w*l+_*d+x*g,t},u.translate=function(t,n,e){var r,i,o,a,s,u,c,l,f,h,p,d,v=e[0],m=e[1],y=e[2];return n===t?(t[12]=n[0]*v+n[4]*m+n[8]*y+n[12],t[13]=n[1]*v+n[5]*m+n[9]*y+n[13],t[14]=n[2]*v+n[6]*m+n[10]*y+n[14],t[15]=n[3]*v+n[7]*m+n[11]*y+n[15]):(r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*m+f*y+n[12],t[13]=i*v+u*m+h*y+n[13],t[14]=o*v+c*m+p*y+n[14],t[15]=a*v+l*m+d*y+n[15]),t},u.scale=function(t,n,e){var r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},u.rotate=function(t,n,e,r){var i,o,a,s,u,c,l,f,p,d,v,m,y,g,b,w,_,x,M,F,A,E,q,z,I=r[0],S=r[1],k=r[2],j=Math.sqrt(I*I+S*S+k*k);return Math.abs(j)<h?null:(j=1/j,I*=j,S*=j,k*=j,i=Math.sin(e),o=Math.cos(e),a=1-o,s=n[0],u=n[1],c=n[2],l=n[3],f=n[4],p=n[5],d=n[6],v=n[7],m=n[8],y=n[9],g=n[10],b=n[11],w=I*I*a+o,_=S*I*a+k*i,x=k*I*a-S*i,M=I*S*a-k*i,F=S*S*a+o,A=k*S*a+I*i,E=I*k*a+S*i,q=S*k*a-I*i,z=k*k*a+o,t[0]=s*w+f*_+m*x,t[1]=u*w+p*_+y*x,t[2]=c*w+d*_+g*x,t[3]=l*w+v*_+b*x,t[4]=s*M+f*F+m*A,t[5]=u*M+p*F+y*A,t[6]=c*M+d*F+g*A,t[7]=l*M+v*F+b*A,t[8]=s*E+f*q+m*z,t[9]=u*E+p*q+y*z,t[10]=c*E+d*q+g*z,t[11]=l*E+v*q+b*z,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},u.rotateX=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[4],a=n[5],s=n[6],u=n[7],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t},u.rotateY=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t},u.rotateZ=function(t,n,e){var r=Math.sin(e),i=Math.cos(e),o=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],f=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t},u.fromRotationTranslation=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,p=i*u,d=i*c,v=o*c,m=a*s,y=a*u,g=a*c;return t[0]=1-(p+v),t[1]=f+g,t[2]=h-y,t[3]=0,t[4]=f-g,t[5]=1-(l+v),t[6]=d+m,t[7]=0,t[8]=h+y,t[9]=d-m,t[10]=1-(l+p),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},u.frustum=function(t,n,e,r,i,o,a){var s=1/(e-n),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(e+n)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},u.perspective=function(t,n,e,r,i){var o=1/Math.tan(n/2),a=1/(r-i);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},u.ortho=function(t,n,e,r,i,o,a){var s=1/(n-e),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},u.lookAt=function(t,n,e,r){var i,o,a,s,c,l,f,p,d,v,m=n[0],y=n[1],g=n[2],b=r[0],w=r[1],_=r[2],x=e[0],M=e[1],F=e[2];return Math.abs(m-x)<h&&Math.abs(y-M)<h&&Math.abs(g-F)<h?u.identity(t):(f=m-x,p=y-M,d=g-F,v=1/Math.sqrt(f*f+p*p+d*d),f*=v,p*=v,d*=v,i=w*d-_*p,o=_*f-b*d,a=b*p-w*f,v=Math.sqrt(i*i+o*o+a*a),v?(i*=v=1/v,o*=v,a*=v):(i=0,o=0,a=0),s=p*a-d*o,c=d*i-f*a,l=f*o-p*i,v=Math.sqrt(s*s+c*c+l*l),v?(s*=v=1/v,c*=v,l*=v):(s=0,c=0,l=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=c,t[6]=p,t[7]=0,t[8]=a,t[9]=l,t[10]=d,t[11]=0,t[12]=-(i*m+o*y+a*g),t[13]=-(s*m+c*y+l*g),t[14]=-(f*m+p*y+d*g),t[15]=1,t)},u.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},void 0!==t&&(t.mat4=u);var l={},f=new Float32Array([0,0,0,1]);if(!h)var h=1e-6;l.create=function(){return new Float32Array(f)},l.clone=r.clone,l.fromValues=r.fromValues,l.copy=r.copy,l.set=r.set,l.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},l.setAxisAngle=function(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t},l.add=r.add,l.mul=l.multiply=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t},l.scale=r.scale,l.rotateX=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},l.rotateY=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},l.rotateZ=function(t,n,e){e*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(e),u=Math.cos(e);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},l.calculateW=function(t,n){var e=n[0],r=n[1],i=n[2];return t[0]=e,t[1]=r,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-e*e-r*r-i*i)),t},l.dot=r.dot,l.lerp=r.lerp,l.slerp=function(t,n,e,r){var i,o,a,s,u=n[0],c=n[1],l=n[2],f=n[3],h=e[0],p=e[1],d=e[2],v=n[3],m=u*h+c*p+l*d+f*v;return Math.abs(m)>=1?(t!==n&&(t[0]=u,t[1]=c,t[2]=l,t[3]=f),t):(i=Math.acos(m),o=Math.sqrt(1-m*m),Math.abs(o)<.001?(t[0]=.5*u+.5*h,t[1]=.5*c+.5*p,t[2]=.5*l+.5*d,t[3]=.5*f+.5*v,t):(a=Math.sin((1-r)*i)/o,s=Math.sin(r*i)/o,t[0]=u*a+h*s,t[1]=c*a+p*s,t[2]=l*a+d*s,t[3]=f*a+v*s,t))},l.invert=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=e*e+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-e*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},l.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},l.len=l.length=r.length,l.sqrLen=l.squaredLength=r.squaredLength,l.normalize=r.normalize,l.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},void 0!==t&&(t.quat=l)}(t.exports)}()},{}],20:[function(t,n,e){(function(){var t=this,r=t._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,c=o.slice,l=o.concat,f=a.toString,h=a.hasOwnProperty,p=o.forEach,d=o.map,v=o.reduce,m=o.reduceRight,y=o.filter,g=o.every,b=o.some,w=o.indexOf,_=o.lastIndexOf,x=Array.isArray,M=Object.keys,F=s.bind,A=function(t){return t instanceof A?t:this instanceof A?void(this._wrapped=t):new A(t)};void 0!==e?(void 0!==n&&n.exports&&(e=n.exports=A),e._=A):t._=A,A.VERSION="1.4.4";var E=A.each=A.forEach=function(t,n,e){if(null!=t)if(p&&t.forEach===p)t.forEach(n,e);else if(t.length===+t.length){for(var r=0,o=t.length;r<o;r++)if(n.call(e,t[r],r,t)===i)return}else for(var a in t)if(A.has(t,a)&&n.call(e,t[a],a,t)===i)return};A.map=A.collect=function(t,n,e){var r=[];return null==t?r:d&&t.map===d?t.map(n,e):(E(t,function(t,i,o){r[r.length]=n.call(e,t,i,o)}),r)};var q="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduce===v)return r&&(n=A.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(E(t,function(t,o,a){i?e=n.call(r,e,t,o,a):(e=t,i=!0)}),!i)throw new TypeError(q);return e},A.reduceRight=A.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(n=A.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var o=t.length;if(o!==+o){var a=A.keys(t);o=a.length}if(E(t,function(s,u,c){u=a?a[--o]:--o,i?e=n.call(r,e,t[u],u,c):(e=t[u],i=!0)}),!i)throw new TypeError(q);return e},A.find=A.detect=function(t,n,e){var r;return z(t,function(t,i,o){if(n.call(e,t,i,o))return r=t,!0}),r},A.filter=A.select=function(t,n,e){var r=[];return null==t?r:y&&t.filter===y?t.filter(n,e):(E(t,function(t,i,o){n.call(e,t,i,o)&&(r[r.length]=t)}),r)},A.reject=function(t,n,e){return A.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},A.every=A.all=function(t,n,e){n||(n=A.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(n,e):(E(t,function(t,o,a){if(!(r=r&&n.call(e,t,o,a)))return i}),!!r)};var z=A.some=A.any=function(t,n,e){n||(n=A.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(n,e):(E(t,function(t,o,a){if(r||(r=n.call(e,t,o,a)))return i}),!!r)};A.contains=A.include=function(t,n){return null!=t&&(w&&t.indexOf===w?-1!=t.indexOf(n):z(t,function(t){return t===n}))},A.invoke=function(t,n){var e=c.call(arguments,2),r=A.isFunction(n);return A.map(t,function(t){return(r?n:t[n]).apply(t,e)})},A.pluck=function(t,n){return A.map(t,function(t){return t[n]})},A.where=function(t,n,e){return A.isEmpty(n)?e?null:[]:A[e?"find":"filter"](t,function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},A.findWhere=function(t,n){return A.where(t,n,!0)},A.max=function(t,n,e){if(!n&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!n&&A.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return E(t,function(t,i,o){var a=n?n.call(e,t,i,o):t;a>=r.computed&&(r={value:t,computed:a})}),r.value},A.min=function(t,n,e){if(!n&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!n&&A.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return E(t,function(t,i,o){var a=n?n.call(e,t,i,o):t;a<r.computed&&(r={value:t,computed:a})}),r.value},A.shuffle=function(t){var n,e=0,r=[];return E(t,function(t){n=A.random(e++),r[e-1]=r[n],r[n]=t}),r};var I=function(t){return A.isFunction(t)?t:function(n){return n[t]}};A.sortBy=function(t,n,e){var r=I(n);return A.pluck(A.map(t,function(t,n,i){return{value:t,index:n,criteria:r.call(e,t,n,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return t.index<n.index?-1:1}),"value")};var S=function(t,n,e,r){var i={},o=I(n||A.identity);return E(t,function(n,a){var s=o.call(e,n,a,t);r(i,s,n)}),i};A.groupBy=function(t,n,e){return S(t,n,e,function(t,n,e){(A.has(t,n)?t[n]:t[n]=[]).push(e)})},A.countBy=function(t,n,e){return S(t,n,e,function(t,n){A.has(t,n)||(t[n]=0),t[n]++})},A.sortedIndex=function(t,n,e,r){for(var i=(e=null==e?A.identity:I(e)).call(r,n),o=0,a=t.length;o<a;){var s=o+a>>>1;e.call(r,t[s])<i?o=s+1:a=s}return o},A.toArray=function(t){return t?A.isArray(t)?c.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,n,e){if(null!=t)return null==n||e?t[0]:c.call(t,0,n)},A.initial=function(t,n,e){return c.call(t,0,t.length-(null==n||e?1:n))},A.last=function(t,n,e){if(null!=t)return null==n||e?t[t.length-1]:c.call(t,Math.max(t.length-n,0))},A.rest=A.tail=A.drop=function(t,n,e){return c.call(t,null==n||e?1:n)},A.compact=function(t){return A.filter(t,A.identity)};var k=function(t,n,e){return E(t,function(t){A.isArray(t)?n?u.apply(e,t):k(t,n,e):e.push(t)}),e};A.flatten=function(t,n){return k(t,n,[])},A.without=function(t){return A.difference(t,c.call(arguments,1))},A.uniq=A.unique=function(t,n,e,r){A.isFunction(n)&&(r=e,e=n,n=!1);var i=e?A.map(t,e,r):t,o=[],a=[];return E(i,function(e,r){(n?r&&a[a.length-1]===e:A.contains(a,e))||(a.push(e),o.push(t[r]))}),o},A.union=function(){return A.uniq(l.apply(o,arguments))},A.intersection=function(t){var n=c.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(n,function(n){return A.indexOf(n,t)>=0})})},A.difference=function(t){var n=l.apply(o,c.call(arguments,1));return A.filter(t,function(t){return!A.contains(n,t)})},A.zip=function(){for(var t=c.call(arguments),n=A.max(A.pluck(t,"length")),e=new Array(n),r=0;r<n;r++)e[r]=A.pluck(t,""+r);return e},A.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;r<i;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},A.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=A.sortedIndex(t,n),t[r]===n?r:-1;r=e<0?Math.max(0,i+e):e}if(w&&t.indexOf===w)return t.indexOf(n,e);for(;r<i;r++)if(t[r]===n)return r;return-1},A.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},A.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,o=new Array(r);i<r;)o[i++]=t,t+=e;return o},A.bind=function(t,n){if(t.bind===F&&F)return F.apply(t,c.call(arguments,1));var e=c.call(arguments,2);return function(){return t.apply(n,e.concat(c.call(arguments)))}},A.partial=function(t){var n=c.call(arguments,1);return function(){return t.apply(this,n.concat(c.call(arguments)))}},A.bindAll=function(t){var n=c.call(arguments,1);return 0===n.length&&(n=A.functions(t)),E(n,function(n){t[n]=A.bind(t[n],t)}),t},A.memoize=function(t,n){var e={};return n||(n=A.identity),function(){var r=n.apply(this,arguments);return A.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},A.delay=function(t,n){var e=c.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(c.call(arguments,1)))},A.throttle=function(t,n){var e,r,i,o,a=0,s=function(){a=new Date,i=null,o=t.apply(e,r)};return function(){var u=new Date,c=n-(u-a);return e=this,r=arguments,c<=0?(clearTimeout(i),i=null,a=u,o=t.apply(e,r)):i||(i=setTimeout(s,c)),o}},A.debounce=function(t,n,e){var r,i;return function(){var o=this,a=arguments,s=e&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,e||(i=t.apply(o,a))},n),s&&(i=t.apply(o,a)),i}},A.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},A.wrap=function(t,n){return function(){var e=[t];return u.apply(e,arguments),n.apply(this,e)}},A.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},A.after=function(t,n){return t<=0?n():function(){if(--t<1)return n.apply(this,arguments)}},A.keys=M||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var n=[];for(var e in t)A.has(t,e)&&(n[n.length]=e);return n},A.values=function(t){var n=[];for(var e in t)A.has(t,e)&&n.push(t[e]);return n},A.pairs=function(t){var n=[];for(var e in t)A.has(t,e)&&n.push([e,t[e]]);return n},A.invert=function(t){var n={};for(var e in t)A.has(t,e)&&(n[t[e]]=e);return n},A.functions=A.methods=function(t){var n=[];for(var e in t)A.isFunction(t[e])&&n.push(e);return n.sort()},A.extend=function(t){return E(c.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},A.pick=function(t){var n={},e=l.apply(o,c.call(arguments,1));return E(e,function(e){e in t&&(n[e]=t[e])}),n},A.omit=function(t){var n={},e=l.apply(o,c.call(arguments,1));for(var r in t)A.contains(e,r)||(n[r]=t[r]);return n},A.defaults=function(t){return E(c.call(arguments,1),function(n){if(n)for(var e in n)null==t[e]&&(t[e]=n[e])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,n){return n(t),t};var j=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof A&&(t=t._wrapped),n instanceof A&&(n=n._wrapped);var i=f.call(t);if(i!=f.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return r[o]==n;e.push(t),r.push(n);var a=0,s=!0;if("[object Array]"==i){if(a=t.length,s=a==n.length)for(;a--&&(s=j(t[a],n[a],e,r)););}else{var u=t.constructor,c=n.constructor;if(u!==c&&!(A.isFunction(u)&&u instanceof u&&A.isFunction(c)&&c instanceof c))return!1;for(var l in t)if(A.has(t,l)&&(a++,!(s=A.has(n,l)&&j(t[l],n[l],e,r))))break;if(s){for(l in n)if(A.has(n,l)&&!a--)break;s=!a}}return e.pop(),r.pop(),s};A.isEqual=function(t,n){return j(t,n,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var n in t)if(A.has(t,n))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=x||function(t){return"[object Array]"==f.call(t)},A.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(t){return"function"==typeof t}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==f.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,n){return h.call(t,n)},A.noConflict=function(){return t._=r,this},A.identity=function(t){return t},A.times=function(t,n,e){for(var r=Array(t),i=0;i<t;i++)r[i]=n.call(e,i);return r},A.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};L.unescape=A.invert(L.escape);var T={escape:new RegExp("["+A.keys(L.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(L.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(n){return null==n?"":(""+n).replace(T[t],function(n){return L[t][n]})}}),A.result=function(t,n){if(null==t)return null;var e=t[n];return A.isFunction(e)?e.call(t):e},A.mixin=function(t){E(A.functions(t),function(n){var e=A[n]=t[n];A.prototype[n]=function(){var t=[this._wrapped];return u.apply(t,arguments),C.call(this,e.apply(A,t))}})};var N=0;A.uniqueId=function(t){var n=++N+"";return t?t+n:n},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,n,e){var r;e=A.defaults({},e,A.templateSettings);var i=new RegExp([(e.escape||O).source,(e.interpolate||O).source,(e.evaluate||O).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(n,e,r,i,s){return a+=t.slice(o,s).replace(R,function(t){return"\\"+P[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+n.length,n}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}if(n)return r(n,A);var s=function(t){return r.call(this,t,A)};return s.source="function("+(e.variable||"obj")+"){\n"+a+"}",s},A.chain=function(t){return A(t).chain()};var C=function(t){return this._chain?A(t).chain():t};A.mixin(A),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=o[t];A.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],C.call(this,e)}}),E(["concat","join","slice"],function(t){var n=o[t];A.prototype[t]=function(){return C.call(this,n.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],21:[function(t,n,e){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},Leap=t("../lib/index")},{"../lib/index":8}]},{},[21]);