/*!
QWebEngine 1.01
https://www.auto00.com
https://www.qiland.com
*/
!function(){var t=window.P,i=window.OSG,n=i.osg,e=i.osgDB,a=window.Object,r=window.JSZip,o=window.EnvironmentPanorama,s=window.EnvironmentCubeMap,u=window.EnvironmentSphericalHarmonics,c=window.IntegrateBRDFMap,h=function(){this._config=void 0,this._promises=[],this._panoramaUE4={},this._cubemapUE4={},this._backgroundCubemap={},this._backgroundPanorama={},this._files={}};h.prototype={loadPackage:function(t){var i=function(i){return r.loadAsync(i).then(function(i){return this.readZipContent(i,t)}.bind(this))}.bind(this),n=t;return"string"==typeof t?e.requestFile(t,{responseType:"blob"}).then(function(t){return i(t)}):i(n)},readZipContent:function(i,n){var e=[],r=n.split("/").pop().split(".zip")[0];return this.name=r,a.keys(i.files).forEach(function(t){var n=t.split(".").pop(),a=null;if("json"===n&&(a="string"),"bin"!==n&&"gz"!==n||(a="arraybuffer"),a){var r=i.files[t].async(a).then(function(i){var n=i,e=t.split("/").pop();return"json"===e.split(".").pop()&&(n=JSON.parse(n)),{name:e,data:n}});e.push(r)}}),t.all(e).then(function(t){return t.forEach(function(t){this._files[t.name]=t.data}.bind(this)),this.init(null,this._files["config.json"])}.bind(this))},getImage:function(t,i,n){var e=this.getTextures(t,i,n);if(e.length)return e[0].images[0]},getTextures:function(t,i,n){return this._config.textures.filter(function(e){return e.encoding===i&&e.format===n&&e.type===t})},getFormatList:function(){return a.keys(this._cubemapUE4)},init:function(t,i){var e=["FLOAT","RGBE","RGBM","LUV"];this._config=i;var a=this._promises;return e.forEach(function(n){var e=n.toLowerCase(),r=this.getImage("specular_ue4",e,"panorama");if(void 0!==r){var s=r.file,u=r.width,c=this._files[s]||t+s;this._panoramaUE4[n]=new o(c,u,i),a.push(this._panoramaUE4[n].loadPacked(n))}}.bind(this)),e.forEach(function(n){var e=n.toLowerCase(),r=this.getImage("specular_ue4",e,"cubemap");if(void 0!==r){var o=r.file,u=r.width,c=this._files[o]||t+o;this._cubemapUE4[n]=new s(c,u,i),a.push(this._cubemapUE4[n].loadPacked(n))}}.bind(this)),function(){var i=this.getImage("brdf_ue4","rg16","lut"),n=i.file,e=i.width,a=this._files[n]||t+n;this._integrateBRDF=new c(a,e)}.bind(this)(),e.forEach(function(i){var n=i.toLowerCase(),e=this.getImage("background",n,"cubemap");if(void 0!==e){var r=e.file,o=e.width,u=this._files[r]||t+r;this._backgroundCubemap[i]=new s(u,o,{minFilter:"LINEAR",magFilter:"LINEAR"}),a.push(this._backgroundCubemap[i].loadPacked(i))}}.bind(this)),this._config.diffuseSPH||n.error("cant find shCoefs in environment config"),this._spherical=new u(i.diffuseSPH),this._cubemapPackedFloat&&a.push(this._cubemapPackedFloat.loadPacked()),a.push(this._integrateBRDF.loadPacked()),this.getPromise()},getPromise:function(){return t.all(this._promises)},getIntegrateBRDF:function(){return this._integrateBRDF},getPanoramaUE4:function(){return this._panoramaUE4},getCubemapUE4:function(){return this._cubemapUE4},getCubemapMipMapped:function(){return this._cubemapPackedFloat},getSpherical:function(){return this._spherical},getCubemapIrradiance:function(){return this._cubemapIrradiance},getBackgroundCubemap:function(){return this._backgroundCubemap},getBackgroundPanorama:function(){return this._backgroundPanorama},getConfig:function(){return this._config}},window.Environment=h}();